<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8"/>
   <title>Player</title>
   
   <link rel="stylesheet" type="text/css" href="css/player.css">
   <link rel="stylesheet" type="text/css" href="css/presentation.css">
   <link rel="stylesheet" type="text/css" href="css/templates.css">

   <script type="text/javascript" src="js/dccs/infra/infra.js"></script>
   <script type="text/javascript" src="js/dccs/dcc-base.js"></script>
   <script type="text/javascript" src="js/dccs/dcc-trigger.js"></script>
   <script type="text/javascript" src="js/dccs/dcc-character.js"></script>
   <script type="text/javascript" src="js/dccs/editable/dcc-character-editable.js"></script>
   <script type="text/javascript" src="js/dccs/dcc-lively-dialog.js"></script>
   <script type="text/javascript" src="js/dccs/editable/dcc-lively-dialog-editable.js"></script>
   <script type="text/javascript" src="js/dccs/dcc-resource-selector.js"></script>
   <script type="text/javascript" src="js/dccs/dcc-state-selector.js"></script>
   
   <script type="text/javascript" src="js/player.js"></script>
</head>
<body onload="PlayerManager.instance().startKnot()">
   <div class="sty-main-panel">
      <div class="sty-control-panel std-border">
      </div>
      <div class="sty-work-panel">
         <div id="knot-panel" class="sty-knot-panel std-border"><!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
   <script type="text/javascript" src="js/dccs/infra/infra.js"></script>
   <script type="text/javascript" src="js/player.js"></script>

   <style>
      .sty-report-panel {
         /* the main box (body) occupies all the visible area */
         position: absolute;
         left: 0px;
         right: 0px;
         top: 0px;
         bottom: 0px;
      
         /* eliminate margins etc. */
         margin: 0px;
         border-width: 0px;

         overflow: scrool;

         border: 1px solid lightgray;
         border-radius: 5px;
         padding: 5px;
      }
   </style>

   <script>
      function start() {
         const player = PlayerManager().instance();
         var output = "";
         output += "##current-user: " + player.retrieveCurrentUser() + "\n";
         output += "##current-case: " + localStorage.getItem(storePrefix + "current-case") + "\n";
         var users = player.retrieveUsers();
         for (u in users.ids) {
             output += "##userid: " + users.ids[u] + "\n";
             var profileStr = localStorage.getItem(storePrefix + "profile-" + users.ids[u]);
             output += "##profile: " + profileStr + "\n";
             if (profileStr != null) {
                 var profile = JSON.parse(profileStr);
                 for (c in profile.cases) {
                     var casetrack = localStorage.getItem(storePrefix + profile.cases[c]);
                     output += "##case: " + casetrack;
                 }
             }
         }
         document.querySelector("#report-panel").innerHTML = "<pre>" + output + "</pre>";
      }
   </script>

   <title>Report</title>
</head>
<body onload="start()">

   <div id="report-panel" class="sty-report-panel">
   </div>

</body>
</html></div>
         <div id="player-panel" class="sty-player-panel std-border"></div>
      </div>
   </div>
</body>
</html>